{"version":3,"sources":["partycontroller.js"],"names":["partyController","req","res","json","status","message","party","parties","id","parseInt","length","body","name","HQAddress","logourl","error","send","details","newparty","existparty","find","field","push","params","oneparties","onePost","partyupdate","updatePost","updateParty","updateparty","updatepartyname","findparty","findIndex","post","splice","filter","Posts"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;IAEMA,e;;;;;;;;;AAEF;+BACkBC,G,EAAKC,G,EAAI;;AAEzB,aAAOA,IAAIC,IAAJ,CAAS;AACdC,gBAAO,GADO;AAEdC,iBAAS,qBAFK;AAGdC,eAAOC;;AAHO,OAAT,CAAP;AAMD;;AAGJ;;;;kCAEoBN,G,EAAKC,G,EAAK;AAC3B,UAAMM,KAAKC,SAASF,kBAAQG,MAAjB,IAA2B,CAAtC;AAD2B,sBAEMT,IAAIU,IAFV;AAAA,UAEpBC,IAFoB,aAEpBA,IAFoB;AAAA,UAEfC,SAFe,aAEfA,SAFe;AAAA,UAELC,OAFK,aAELA,OAFK;;AAAA,mBAMtB,+BAAMb,IAAIU,IAAV,CANsB;AAAA,UAKzBI,KALyB,UAKzBA,KALyB;;AAOxB,UAAGA,KAAH,EAAU,OAAOb,IAAIc,IAAJ,CAAS;AAC1BZ,gBAAO,GADmB;AAEzBW,eAAMA,MAAME,OAAN,CAAc,CAAd,EAAiBZ;AAFE,OAAT,CAAP;;AAKb,UAAMa,WAAW;AACfV,cADe;AAEfI,kBAFe;AAGfC,4BAHe;AAIfC;AAJe,OAAjB;;AASJ,UAAMK,aAAWZ,kBAAQa,IAAR,CAAa;AAAA,eAASC,MAAMT,IAAN,IAAYX,IAAIU,IAAJ,CAASC,IAA9B;AAAA,OAAb,CAAjB;AACA,UAAIO,UAAJ,EAAgB,OAAOjB,IAAIc,IAAJ,CAAS;AAC9BZ,gBAAQ,GADsB;AAE9BW,eAAM;AAFwB,OAAT,CAAP;;AAKZR,wBAAQe,IAAR,CAAaJ,QAAb;AACA,aAAOhB,IAAIE,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAC1BC,gBAAO,GADmB;AAE1BC,iBAAS;AAFiB,OAArB,CAAP;AAKD;;AAEH;;;;gCACmBJ,G,EAAKC,G,EAAK;AAAA,UACjBM,EADiB,GACVP,IAAIsB,MADM,CACjBf,EADiB;;AAEzB,UAAMF,QAAQC,kBAAQa,IAAR,CAAa;AAAA,eAAcI,WAAWhB,EAAX,IAAiBA,EAA/B;AAAA,OAAb,CAAd;AACA,UAAIF,KAAJ,EAAW;AACT,eAAOJ,IAAIE,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAC1BC,kBAAO,GADmB;AAE1BC,mBAAS,iBAFiB;AAG1BoB,mBAASnB;AAHiB,SAArB,CAAP;AAKD,OAND,MAMO;AACL,eAAOJ,IAAIE,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAC1BC,kBAAO,GADmB;AAE1BW,iBAAO;AAFmB,SAArB,CAAP;AAID;AACF;;;gCAEkBd,G,EAAKC,G,EAAK;AAAA,UACnBM,EADmB,GACZP,IAAIsB,MADQ,CACnBf,EADmB;;AAE3B,UAAMkB,cAAcnB,kBAAQa,IAAR,CAAa;AAAA,eAAcO,WAAWnB,EAAX,IAAiBA,EAA/B;AAAA,OAAb,CAApB;;AAGA,UAAIkB,WAAJ,EAAiB;AAAA,sBAIV,+BAAMzB,IAAIU,IAAV,CAJU;AAAA,YAGbI,KAHa,WAGbA,KAHa;;AAKZ,YAAGA,KAAH,EAAU,OAAOb,IAAIE,MAAJ,CAAW,GAAX,EAAiBF,GAAjB,CAAqBc,IAArB,CAA0B;AAC3CZ,kBAAO,GADoC;AAE1CW,iBAAMA,MAAME,OAAN,CAAc,CAAd,EAAiBZ;AAFmB,SAA1B,CAAP;;AAKb,YAAMc,aAAWZ,kBAAQa,IAAR,CAAa;AAAA,iBAASC,MAAMT,IAAN,IAAYX,IAAIU,IAAJ,CAASC,IAA9B;AAAA,SAAb,CAAjB;AACE,YAAIO,UAAJ,EAAgB,OAAOjB,IAAIc,IAAJ,CAAS;AAC9BZ,kBAAQ,GADsB;AAE9BW,iBAAM;AAFwB,SAAT,CAAP;;AAKjBW,oBAAYd,IAAZ,GAAmBX,IAAIU,IAAJ,CAASC,IAA7B,EAAqCc,YAAYb,SAAZ,GAAsBZ,IAAIU,IAAJ,CAASE,SAApE,EAAiFa,YAAYZ,OAAZ,GAAoBb,IAAIU,IAAJ,CAASG,OAA9G,EAAyHY,YAAYf,IAAZ,GAAmBV,IAAIU,IAAJ,CAASA,IAArJ;AACA,eAAOT,IAAIE,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAC1BC,kBAAO,GADmB;AAE1BC,mBAAS,sBAFiB;AAG1BuB,uBAAatB;AAHa,SAArB,CAAP;AAKD,OAtBD,MAsBO;AACL,eAAOJ,IAAIE,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAC1BC,kBAAO,GADmB;AAE1BW,iBAAO;AAFmB,SAArB,CAAP;AAID;AACF;;AAGH;;;;oCACuBd,G,EAAKC,G,EAAK;AAAA,UACrBM,EADqB,GACdP,IAAIsB,MADU,CACrBf,EADqB;AAAA,UAErBI,IAFqB,GAEZX,IAAIsB,MAFQ,CAErBX,IAFqB;;AAG7B,UAAMiB,cAActB,kBAAQa,IAAR,CAAa;AAAA,eAAcO,WAAWnB,EAAX,IAAiBA,EAA/B;AAAA,OAAb,CAApB;AACA,UAAMsB,kBAAkBvB,kBAAQa,IAAR,CAAa;AAAA,eAAcO,WAAWf,IAAX,IAAmBA,IAAjC;AAAA,OAAb,CAAxB;;AAIA,UAAIiB,eAAaC,eAAjB,EAAkC;AAAA,sBAI3B,+BAAM7B,IAAIU,IAAV,CAJ2B;AAAA,YAG9BI,KAH8B,WAG9BA,KAH8B;;AAK7B,YAAGA,KAAH,EAAU,OAAOb,IAAIc,IAAJ,CAAS;AAC1BZ,kBAAO,GADmB;AAEzBW,iBAAMA,MAAME,OAAN,CAAc,CAAd,EAAiBZ;AAFE,SAAT,CAAP;;AAKX,YAAMc,aAAWZ,kBAAQa,IAAR,CAAa;AAAA,iBAASC,MAAMT,IAAN,IAAYX,IAAIU,IAAJ,CAASC,IAA9B;AAAA,SAAb,CAAjB;AACA,YAAIO,UAAJ,EAAgB,OAAOjB,IAAIc,IAAJ,CAAS;AAC9BZ,kBAAQ,GADsB;AAE9BW,iBAAM;AAFwB,SAAT,CAAP;;AAKjBT,kCAAMM,IAAN,GAAaX,IAAIU,IAAJ,CAASC,IAAvB,EAA8BN,0BAAMK,IAAN,GAAaV,IAAIU,IAAJ,CAASA,IAApD;AACA,eAAOT,IAAIE,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAC1BC,kBAAO,GADmB;AAE1BC,mBAAS,6BAFiB;AAG1BsB,sBAAYrB;AAHc,SAArB,CAAP;AAKD,OAtBD,MAsBO;AACL,eAAOJ,IAAIE,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAC1BC,kBAAO,GADmB;AAE1BW,iBAAO;AAFmB,SAArB,CAAP;AAID;AACF;;AAGD;;;;kCAEqBd,G,EAAKC,G,EAAK;AAAA,UACvBM,EADuB,GAChBP,IAAIsB,MADY,CACvBf,EADuB;;AAE7B,UAAMuB,YAAYxB,kBAAQyB,SAAR,CAAkB,gBAAQ;AAC1C,eAAOC,KAAKzB,EAAL,IAAWA,EAAlB;AACD,OAFiB,CAAlB;AAGA,UAAIuB,YAAW,CAAC,CAAhB,EAAmB;AACjBxB,0BAAQ2B,MAAR,CAAeH,SAAf,EAAyB,CAAzB;AACA,YAAMb,WAAWX,kBAAQ4B,MAAR,CAAe,gBAAQ;AACtC,iBAAOF,SAASF,SAAhB;AACD,SAFgB,CAAjB;AAGA7B,YAAIE,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AACnBC,kBAAO,GADY;AAEnBC,mBAAS,4BAFU;AAGnB+B,iBAAOlB;AAHY,SAArB;AAKD,OAVD,MAUO;AACLhB,YAAIE,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AACnBC,kBAAO,GADY;AAEnBW,iBAAO;AAFY,SAArB;AAID;AACF;;;;;;kBAGYf,e","file":"partycontroller.js","sourceRoot":"C:/Users/PIH/Documents/andela curriculum/pratice/Politico/controller","sourcesContent":["import parties from \"../db/parties\";\r\nimport party from \"../helpers/validationparty\";\r\n\r\nclass partyController {\r\n\r\n    //getting the parties\r\n    static getparties(req, res){\r\n    \r\n      return res.json({\r\n        status:200,\r\n        message: \"List of all parties\",\r\n        party: parties\r\n  \r\n      });\r\n    }\r\n\r\n\r\n // create political party\r\n\r\nstatic createparties(req, res) {\r\n    const id = parseInt(parties.length) + 1;\r\n    const {name,HQAddress,logourl} = req.body;\r\n     \r\n    const{\r\n      error\r\n       }=party(req.body);\r\n       if(error) return res.send({\r\n       status:400,\r\n        error:error.details[0].message\r\n        });\r\n\r\n    const newparty = {\r\n      id,\r\n      name,\r\n      HQAddress,\r\n      logourl,\r\n    };\r\n\r\n \r\n\r\nconst existparty=parties.find(field => field.name==req.body.name);\r\nif (existparty) return res.send({\r\n  status: 400,\r\n  error:\"please use other name this party name already exist\"\r\n});\r\n\r\n    parties.push(newparty);\r\n    return res.status(200).json({  \r\n      status:200,\r\n      message: \"created a new party\"\r\n    });\r\n\r\n  }\r\n\r\n//get parties by id\r\nstatic getOneparty(req, res) {\r\n    const { id } = req.params;\r\n    const party = parties.find(oneparties => oneparties.id == id);\r\n    if (party) {\r\n      return res.status(200).json({\r\n        status:200,\r\n        message: \"one party found\",\r\n        onePost: party\r\n      });\r\n    } else {\r\n      return res.status(404).json({\r\n        status:404,\r\n        error: \"no party found with that id\"\r\n      });\r\n    }\r\n  }\r\n\r\n  static updateparty(req, res) {\r\n    const { id } = req.params;\r\n    const partyupdate = parties.find(updatePost => updatePost.id == id);\r\n  \r\n  \r\n    if (partyupdate) {\r\n  \r\n      const{\r\n        error\r\n         }=party(req.body);\r\n         if(error) return res.status(404) .res.send({\r\n         status:400,\r\n          error:error.details[0].message\r\n          });\r\n  \r\n      const existparty=parties.find(field => field.name==req.body.name);\r\n        if (existparty) return res.send({\r\n          status: 400,\r\n          error:\"please use other name ,this name is same as name you are updating\"\r\n        });\r\n  \r\n      (partyupdate.name = req.body.name), (partyupdate.HQAddress=req.body.HQAddress), (partyupdate.logourl=req.body.logourl), (partyupdate.body = req.body.body);\r\n      return res.status(200).json({\r\n        status:200,\r\n        message: \"successfully updated\",\r\n        updateParty: party\r\n      });\r\n    } else {\r\n      return res.status(404).json({\r\n        status:404,\r\n        error: \"party cannot be updated\"\r\n      });\r\n    }\r\n  }\r\n  \r\n\r\n//update function (patch)\r\nstatic updatepartyname(req, res) {\r\n    const { id } = req.params;\r\n    const { name } = req.params;\r\n    const updateparty = parties.find(updatePost => updatePost.id == id);\r\n    const updatepartyname = parties.find(updatePost => updatePost.name == name);\r\n  \r\n    \r\n  \r\n    if (updateparty&&updatepartyname) {\r\n        \r\n      const{\r\n        error\r\n         }=party(req.body);\r\n         if(error) return res.send({\r\n         status:400,\r\n          error:error.details[0].message\r\n          });\r\n  \r\n        const existparty=parties.find(field => field.name==req.body.name);\r\n        if (existparty) return res.send({\r\n          status: 400,\r\n          error:\"please use other name ,this name is same as name you are updating\"\r\n        });\r\n  \r\n      (party.name = req.body.name),(party.body = req.body.body);\r\n      return res.status(200).json({\r\n        status:200,\r\n        message: \"party successfully  updated\",\r\n        updatePost: party\r\n      });\r\n    } else {\r\n      return res.status(404).json({\r\n        status:404,\r\n        error: \"party cannot be updated\"\r\n      });\r\n    }\r\n  }\r\n\r\n  \r\n  // delete data functions \r\n\r\n  static deleteparties(req, res) {\r\n    let { id } = req.params;\r\n    const findparty = parties.findIndex(post => {\r\n      return post.id == id;\r\n    });\r\n    if (findparty >-1) {\r\n      parties.splice(findparty,1);\r\n      const newparty = parties.filter(post => {\r\n        return post !== findparty;\r\n      });\r\n      res.status(200).json({\r\n        status:200,\r\n        message: \"party successfully deleted\",\r\n        Posts: newparty\r\n      });\r\n    } else {\r\n      res.status(400).json({\r\n        status:400,\r\n        error: \"could not delete a party\"\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\nexport default partyController;"]}