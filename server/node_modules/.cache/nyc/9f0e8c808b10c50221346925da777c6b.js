'use strict';var cov_2fnoac991t=function(){var path="C:\\Users\\PIH\\Documents\\andela curriculum\\pratice\\politico2\\controller\\candidatecontroller.js",hash="a93717b6c293656b8e0a127ac115b7761fe22439",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"C:\\Users\\PIH\\Documents\\andela curriculum\\pratice\\politico2\\controller\\candidatecontroller.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:11},end:{line:7,column:25}},"2":{start:{line:9,column:12},end:{line:9,column:40}},"3":{start:{line:11,column:9},end:{line:11,column:27}},"4":{start:{line:13,column:10},end:{line:13,column:36}},"5":{start:{line:15,column:15},end:{line:15,column:39}},"6":{start:{line:17,column:16},end:{line:17,column:48}},"7":{start:{line:19,column:18},end:{line:19,column:46}},"8":{start:{line:21,column:19},end:{line:21,column:54}},"9":{start:{line:23,column:23},end:{line:23,column:60}},"10":{start:{line:25,column:24},end:{line:25,column:64}},"11":{start:{line:27,column:39},end:{line:27,column:93}},"12":{start:{line:29,column:18},end:{line:29,column:20}},"13":{start:{line:35,column:19},end:{line:49,column:1}},"14":{start:{line:36,column:19},end:{line:36,column:32}},"15":{start:{line:37,column:17},end:{line:37,column:96}},"16":{start:{line:38,column:1},end:{line:48,column:4}},"17":{start:{line:40,column:2},end:{line:45,column:3}},"18":{start:{line:41,column:3},end:{line:41,column:37}},"19":{start:{line:44,column:3},end:{line:44,column:78}},"20":{start:{line:47,column:2},end:{line:47,column:28}},"21":{start:{line:51,column:23},end:{line:109,column:1}},"22":{start:{line:53,column:10},end:{line:53,column:23}},"23":{start:{line:55,column:17},end:{line:58,column:2}},"24":{start:{line:60,column:1},end:{line:60,column:43}},"25":{start:{line:62,column:13},end:{line:62,column:93}},"26":{start:{line:63,column:1},end:{line:68,column:2}},"27":{start:{line:64,column:2},end:{line:67,column:5}},"28":{start:{line:70,column:14},end:{line:70,column:82}},"29":{start:{line:71,column:1},end:{line:76,column:2}},"30":{start:{line:72,column:2},end:{line:75,column:5}},"31":{start:{line:78,column:12},end:{line:78,column:67}},"32":{start:{line:79,column:1},end:{line:84,column:2}},"33":{start:{line:80,column:2},end:{line:83,column:5}},"34":{start:{line:86,column:22},end:{line:86,column:160}},"35":{start:{line:87,column:1},end:{line:92,column:2}},"36":{start:{line:88,column:2},end:{line:91,column:5}},"37":{start:{line:94,column:1},end:{line:108,column:2}},"38":{start:{line:95,column:2},end:{line:95,column:137}},"39":{start:{line:96,column:2},end:{line:102,column:5}},"40":{start:{line:104,column:2},end:{line:107,column:5}},"41":{start:{line:111,column:0},end:{line:111,column:48}},"42":{start:{line:112,column:0},end:{line:112,column:40}},"43":{start:{line:114,column:0},end:{line:114,column:30}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:27,column:9},end:{line:27,column:31}},loc:{start:{line:27,column:37},end:{line:27,column:95}},line:27},"1":{name:"Getcandidate",decl:{start:{line:35,column:28},end:{line:35,column:40}},loc:{start:{line:35,column:51},end:{line:49,column:1}},line:35},"2":{name:"(anonymous_2)",decl:{start:{line:38,column:16},end:{line:38,column:17}},loc:{start:{line:38,column:36},end:{line:46,column:2}},line:38},"3":{name:"(anonymous_3)",decl:{start:{line:46,column:10},end:{line:46,column:11}},loc:{start:{line:46,column:27},end:{line:48,column:2}},line:46},"4":{name:"createcandidates",decl:{start:{line:51,column:32},end:{line:51,column:48}},loc:{start:{line:51,column:59},end:{line:109,column:1}},line:51}},branchMap:{"0":{loc:{start:{line:27,column:46},end:{line:27,column:92}},type:"cond-expr",locations:[{start:{line:27,column:70},end:{line:27,column:73}},{start:{line:27,column:76},end:{line:27,column:92}}],line:27},"1":{loc:{start:{line:27,column:46},end:{line:27,column:67}},type:"binary-expr",locations:[{start:{line:27,column:46},end:{line:27,column:49}},{start:{line:27,column:53},end:{line:27,column:67}}],line:27},"2":{loc:{start:{line:40,column:2},end:{line:45,column:3}},type:"if",locations:[{start:{line:40,column:2},end:{line:45,column:3}},{start:{line:40,column:2},end:{line:45,column:3}}],line:40},"3":{loc:{start:{line:63,column:1},end:{line:68,column:2}},type:"if",locations:[{start:{line:63,column:1},end:{line:68,column:2}},{start:{line:63,column:1},end:{line:68,column:2}}],line:63},"4":{loc:{start:{line:71,column:1},end:{line:76,column:2}},type:"if",locations:[{start:{line:71,column:1},end:{line:76,column:2}},{start:{line:71,column:1},end:{line:76,column:2}}],line:71},"5":{loc:{start:{line:79,column:1},end:{line:84,column:2}},type:"if",locations:[{start:{line:79,column:1},end:{line:84,column:2}},{start:{line:79,column:1},end:{line:84,column:2}}],line:79},"6":{loc:{start:{line:87,column:1},end:{line:92,column:2}},type:"if",locations:[{start:{line:87,column:1},end:{line:92,column:2}},{start:{line:87,column:1},end:{line:92,column:2}}],line:87}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_2fnoac991t.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _joi=(cov_2fnoac991t.s[1]++,require('joi'));var _joi2=(cov_2fnoac991t.s[2]++,_interopRequireDefault(_joi));var _v=(cov_2fnoac991t.s[3]++,require('uuid/v1'));var _v2=(cov_2fnoac991t.s[4]++,_interopRequireDefault(_v));var _Queries=(cov_2fnoac991t.s[5]++,require('../db/Queries'));var _Queries2=(cov_2fnoac991t.s[6]++,_interopRequireDefault(_Queries));var _connection=(cov_2fnoac991t.s[7]++,require('../src/connection'));var _connection2=(cov_2fnoac991t.s[8]++,_interopRequireDefault(_connection));var _Validationparty=(cov_2fnoac991t.s[9]++,require('../helpers/Validationparty'));var _Validationparty2=(cov_2fnoac991t.s[10]++,_interopRequireDefault(_Validationparty));function _interopRequireDefault(obj){cov_2fnoac991t.f[0]++;cov_2fnoac991t.s[11]++;return(cov_2fnoac991t.b[1][0]++,obj)&&(cov_2fnoac991t.b[1][1]++,obj.__esModule)?(cov_2fnoac991t.b[0][0]++,obj):(cov_2fnoac991t.b[0][1]++,{default:obj});}var controllers=(cov_2fnoac991t.s[12]++,{});// fetch a candidates by id  method
//import candidate from '../models/candidatemodel';
// src/usingDB/controllers/Reflection.js
cov_2fnoac991t.s[13]++;var Getcandidate=function Getcandidate(req,res){cov_2fnoac991t.f[1]++;var candidateId=(cov_2fnoac991t.s[14]++,req.params.id);var candidate=(cov_2fnoac991t.s[15]++,(0,_connection2.default)(_Queries2.default.getSpecificandidate,[candidateId]));cov_2fnoac991t.s[16]++;candidate.then(function(response){cov_2fnoac991t.f[2]++;cov_2fnoac991t.s[17]++;// send it.
if(response.length>=1){cov_2fnoac991t.b[2][0]++;cov_2fnoac991t.s[18]++;res.status(200).send(response[0]);}else{cov_2fnoac991t.b[2][1]++;cov_2fnoac991t.s[19]++;// send the error on page
res.status(404).send({message:'sorry no candidate  found it is empty'});}}).catch(function(error){cov_2fnoac991t.f[3]++;cov_2fnoac991t.s[20]++;return console.log(error);});};// create candidates
cov_2fnoac991t.s[21]++;var createcandidates=function createcandidates(req,res){cov_2fnoac991t.f[4]++;// Office id
var id=(cov_2fnoac991t.s[22]++,req.params.id);var candidate=(cov_2fnoac991t.s[23]++,{party:req.body.party,user:req.body.user});cov_2fnoac991t.s[24]++;_Validationparty2.default.candidateSchema;// Check if party exists
var party=(cov_2fnoac991t.s[25]++,(0,_connection2.default)(_Queries2.default.getSpecificParty,[candidate.party]));cov_2fnoac991t.s[26]++;if(party.rows.length===0){cov_2fnoac991t.b[3][0]++;cov_2fnoac991t.s[27]++;return res.status(400).json({status:400,error:'The party of id does not exist.'});}else{cov_2fnoac991t.b[3][1]++;}// Check if office exists
var office=(cov_2fnoac991t.s[28]++,(0,_connection2.default)(_Queries2.default.getSpecificoffice,[id]));cov_2fnoac991t.s[29]++;if(office.rows.length===0){cov_2fnoac991t.b[4][0]++;cov_2fnoac991t.s[30]++;return res.status(400).json({status:400,error:'The office of id does not exist.'});}else{cov_2fnoac991t.b[4][1]++;}// Check if user exists
var user=(cov_2fnoac991t.s[31]++,(0,_connection2.default)(getoneuser,[candidate.user]));cov_2fnoac991t.s[32]++;if(user.rows.length===0){cov_2fnoac991t.b[5][0]++;cov_2fnoac991t.s[33]++;return res.status(400).json({status:400,error:'The user of id does not exist.'});}else{cov_2fnoac991t.b[5][1]++;}// Check if candidate (office, party and user) is already registered
var candidatecheck=(cov_2fnoac991t.s[34]++,(0,_connection2.default)('SELECT * FROM candidates WHERE office=$1 and party=$2 and candidate=$3',[id,candidate.party,candidate.user]));cov_2fnoac991t.s[35]++;if(candidatecheck.rows.length!==0){cov_2fnoac991t.b[6][0]++;cov_2fnoac991t.s[36]++;return res.status(409).json({status:409,error:'The candidate is already registered.'});}else{cov_2fnoac991t.b[6][1]++;}// Register candidate
cov_2fnoac991t.s[37]++;try{cov_2fnoac991t.s[38]++;(0,_connection2.default)('INSERT INTO candidates(office, candidates, party) VALUES($1,$2,$3)',[id,candidate.party,candidate.user]);cov_2fnoac991t.s[39]++;return res.status(201).json({status:201,data:[{office:id,user:candidate.user}]});}catch(error){cov_2fnoac991t.s[40]++;return res.status(404).json({status:404,error:error});}};cov_2fnoac991t.s[41]++;controllers.createcandidates=createcandidates;cov_2fnoac991t.s[42]++;controllers.Getcandidate=Getcandidate;cov_2fnoac991t.s[43]++;exports.default=controllers;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhbmRpZGF0ZWNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiY29udHJvbGxlcnMiLCJHZXRjYW5kaWRhdGUiLCJyZXEiLCJyZXMiLCJjYW5kaWRhdGVJZCIsInBhcmFtcyIsImlkIiwiY2FuZGlkYXRlIiwicXVlcmllcyIsImdldFNwZWNpZmljYW5kaWRhdGUiLCJ0aGVuIiwicmVzcG9uc2UiLCJsZW5ndGgiLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsImNhdGNoIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiY3JlYXRlY2FuZGlkYXRlcyIsInBhcnR5IiwiYm9keSIsInVzZXIiLCJTY2hlbWEiLCJjYW5kaWRhdGVTY2hlbWEiLCJnZXRTcGVjaWZpY1BhcnR5Iiwicm93cyIsImpzb24iLCJvZmZpY2UiLCJnZXRTcGVjaWZpY29mZmljZSIsImdldG9uZXVzZXIiLCJjYW5kaWRhdGVjaGVjayIsImRhdGEiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFFQTs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBLElBQU1BLGNBQWMsRUFBcEI7O0FBR0E7O0FBUkE7QUFIQTtBQVlBLElBQU1DLGVBQWUsU0FBZkEsWUFBZSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBYztBQUNqQyxLQUFNQyxjQUFjRixJQUFJRyxNQUFKLENBQVdDLEVBQS9CO0FBQ0YsS0FBTUMsWUFBWSwwQkFBUUMsa0JBQVFDLG1CQUFoQixFQUFvQyxDQUFDTCxXQUFELENBQXBDLENBQWxCO0FBQ0FHLFdBQ0NHLElBREQsQ0FDTSxVQUFDQyxRQUFELEVBQWM7QUFDbEI7QUFDQSxNQUFJQSxTQUFTQyxNQUFULElBQWtCLENBQXRCLEVBQXlCO0FBQ3ZCVCxPQUFJVSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUJILFNBQVMsQ0FBVCxDQUFyQjtBQUNELEdBRkQsTUFFTztBQUNMO0FBQ0FSLE9BQUlVLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixF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Y2VSb290IjoiQzovVXNlcnMvUElIL0RvY3VtZW50cy9hbmRlbGEgY3VycmljdWx1bS9wcmF0aWNlL3BvbGl0aWNvMi9jb250cm9sbGVyIiwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3VzaW5nREIvY29udHJvbGxlcnMvUmVmbGVjdGlvbi5qc1xyXG5pbXBvcnQgam9pIGZyb20gJ2pvaSc7XHJcbmltcG9ydCB1dWlkdjEgZnJvbSAndXVpZC92MSc7XHJcbi8vaW1wb3J0IGNhbmRpZGF0ZSBmcm9tICcuLi9tb2RlbHMvY2FuZGlkYXRlbW9kZWwnO1xyXG5pbXBvcnQgcXVlcmllcyBmcm9tICcuLi9kYi9RdWVyaWVzJztcclxuaW1wb3J0IGV4ZWN1dGUgZnJvbSAnLi4vc3JjL2Nvbm5lY3Rpb24nO1xyXG5pbXBvcnQgU2NoZW1hIGZyb20gJy4uL2hlbHBlcnMvVmFsaWRhdGlvbnBhcnR5JztcclxuXHJcbmNvbnN0IGNvbnRyb2xsZXJzID0ge307XHJcblxyXG5cclxuLy8gZmV0Y2ggYSBjYW5kaWRhdGVzIGJ5IGlkICBtZXRob2RcclxuY29uc3QgR2V0Y2FuZGlkYXRlID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgY2FuZGlkYXRlSWQgPSByZXEucGFyYW1zLmlkO1xyXG5jb25zdCBjYW5kaWRhdGUgPSBleGVjdXRlKHF1ZXJpZXMuZ2V0U3BlY2lmaWNhbmRpZGF0ZSxbY2FuZGlkYXRlSWRdKTtcclxuY2FuZGlkYXRlXHJcbi50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gIC8vIHNlbmQgaXQuXHJcbiAgaWYgKHJlc3BvbnNlLmxlbmd0aCA+PTEpIHtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHJlc3BvbnNlWzBdKTtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gc2VuZCB0aGUgZXJyb3Igb24gcGFnZVxyXG4gICAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOidzb3JyeSBubyBjYW5kaWRhdGUgIGZvdW5kIGl0IGlzIGVtcHR5JyB9KTtcclxuICB9XHJcbn0pXHJcbi5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZyhlcnJvcikpO1xyXG59O1xyXG4vLyBjcmVhdGUgY2FuZGlkYXRlc1xyXG5jb25zdCBjcmVhdGVjYW5kaWRhdGVzID0gKHJlcSwgcmVzKSA9PiB7XHJcblx0Ly8gT2ZmaWNlIGlkXHJcblx0Y29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuXHRjb25zdCBjYW5kaWRhdGUgPSB7XHJcblx0XHRwYXJ0eTogcmVxLmJvZHkucGFydHksXHJcblx0XHR1c2VyOiByZXEuYm9keS51c2VyXHJcbiAgfVxyXG5cclxuICBTY2hlbWEuY2FuZGlkYXRlU2NoZW1hXHJcblx0Ly8gQ2hlY2sgaWYgcGFydHkgZXhpc3RzXHJcblx0Y29uc3QgcGFydHkgPSBleGVjdXRlKHF1ZXJpZXMuZ2V0U3BlY2lmaWNQYXJ0eSwgW2NhbmRpZGF0ZS5wYXJ0eV0pO1xyXG5cdGlmIChwYXJ0eS5yb3dzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0cmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuXHRcdFx0c3RhdHVzOiA0MDAsXHJcblx0XHRcdGVycm9yOiAnVGhlIHBhcnR5IG9mIGlkIGRvZXMgbm90IGV4aXN0LidcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQvLyBDaGVjayBpZiBvZmZpY2UgZXhpc3RzXHJcblx0Y29uc3Qgb2ZmaWNlID0gZXhlY3V0ZShxdWVyaWVzLmdldFNwZWNpZmljb2ZmaWNlLCBbaWRdKTtcclxuXHRpZiAob2ZmaWNlLnJvd3MubGVuZ3RoID09PSAwKSB7XHJcblx0XHRyZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG5cdFx0XHRzdGF0dXM6IDQwMCxcclxuXHRcdFx0ZXJyb3I6ICdUaGUgb2ZmaWNlIG9mIGlkIGRvZXMgbm90IGV4aXN0LidcclxuXHRcdH0pO1xyXG5cdH1cclxuXHQvLyBDaGVjayBpZiB1c2VyIGV4aXN0c1xyXG5cdGNvbnN0IHVzZXIgPSBleGVjdXRlKGdldG9uZXVzZXIsIFtjYW5kaWRhdGUudXNlcl0pO1xyXG5cdGlmICh1c2VyLnJvd3MubGVuZ3RoID09PSAwKSB7XHJcblx0XHRyZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG5cdFx0XHRzdGF0dXM6IDQwMCxcclxuXHRcdFx0ZXJyb3I6ICdUaGUgdXNlciBvZiBpZCBkb2VzIG5vdCBleGlzdC4nXHJcblx0XHR9KTtcclxuXHR9XHJcblx0Ly8gQ2hlY2sgaWYgY2FuZGlkYXRlIChvZmZpY2UsIHBhcnR5IGFuZCB1c2VyKSBpcyBhbHJlYWR5IHJlZ2lzdGVyZWRcclxuXHRjb25zdCBjYW5kaWRhdGVjaGVjayA9IGV4ZWN1dGUoJ1NFTEVDVCAqIEZST00gY2FuZGlkYXRlcyBXSEVSRSBvZmZpY2U9JDEgYW5kIHBhcnR5PSQyIGFuZCBjYW5kaWRhdGU9JDMnLFxyXG5cdFx0W1xyXG5cdFx0XHRpZCxcclxuXHRcdFx0Y2FuZGlkYXRlLnBhcnR5LFxyXG5cdFx0XHRjYW5kaWRhdGUudXNlclxyXG5cdFx0XSk7XHJcblx0aWYgKGNhbmRpZGF0ZWNoZWNrLnJvd3MubGVuZ3RoICE9PSAwKSB7XHJcblx0XHRyZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oe1xyXG5cdFx0XHRzdGF0dXM6IDQwOSxcclxuXHRcdFx0ZXJyb3I6ICdUaGUgY2FuZGlkYXRlIGlzIGFscmVhZHkgcmVnaXN0ZXJlZC4nXHJcblx0XHR9KTtcclxuXHR9XHJcblx0Ly8gUmVnaXN0ZXIgY2FuZGlkYXRlXHJcblx0dHJ5IHtcclxuXHRcdGV4ZWN1dGUoJ0lOU0VSVCBJTlRPIGNhbmRpZGF0ZXMob2ZmaWNlLCBjYW5kaWRhdGVzLCBwYXJ0eSkgVkFMVUVTKCQxLCQyLCQzKScsXHJcblx0XHRbXHJcblx0XHRcdGlkLFxyXG5cdFx0XHRjYW5kaWRhdGUucGFydHksXHJcblx0XHRcdGNhbmRpZGF0ZS51c2VyXHJcblx0XHRdKTtcclxuXHRcdHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7XHJcblx0XHRcdHN0YXR1czogMjAxLFxyXG5cdFx0XHRkYXRhOiBbXHJcblx0XHRcdCAge1xyXG5cdFx0XHQgIFx0b2ZmaWNlOiBpZCxcclxuXHRcdFx0ICBcdHVzZXI6IGNhbmRpZGF0ZS51c2VyXHJcblx0XHRcdCAgfVxyXG5cdFx0XHRdXHJcblx0XHR9KTtcclxuXHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0cmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuXHRcdFx0c3RhdHVzOiA0MDQsXHJcblx0XHRcdGVycm9yOiBlcnJvclxyXG5cdFx0fSk7XHJcblx0fVxyXG59O1xyXG5cclxuXHJcblxyXG5jb250cm9sbGVycy5jcmVhdGVjYW5kaWRhdGVzID0gY3JlYXRlY2FuZGlkYXRlcztcclxuY29udHJvbGxlcnMuR2V0Y2FuZGlkYXRlPUdldGNhbmRpZGF0ZTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbnRyb2xsZXJzOyJdfQ==